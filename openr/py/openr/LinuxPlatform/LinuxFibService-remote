#!/usr/bin/env python
#
# Autogenerated by Thrift
#
# DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING
#  @generated
#

from __future__ import print_function
from __future__ import absolute_import

import os
import sys

if (not sys.argv[0].endswith("par") and
    not sys.argv[0].endswith("xar") and
    os.getenv('PAR_UNPACK_TMP') == None):

    f = open(sys.argv[0], "r")

    f.readline() # This will be #!/bin/bash
    line = f.readline()
    f.close()

    # The par generator tool always has '# This par was made' as the
    # second line. See fbcode/tools/make_par/make_par.py
    if (not line.startswith('# This par was made')):
        print("""WARNING
        You are trying to run *-remote.py which is
        incorrect as the paths are not set up correctly.
        Instead, you should generate your thrift file with
        thrift_library and then run the resulting
        *-remote.par.
        For more information, please read
        http://fburl.com/python-remotes""")
        exit()

from . import LinuxFibService
from . import ttypes

from thrift.util.remote import Function
from thrift.remote import Remote

FUNCTIONS = {
    'getKernelRouteTable': Function('getKernelRouteTable', 'LinuxFibService', 'list<IpPrefix.UnicastRoute>', []),
    'addUnicastRoute': Function('addUnicastRoute', 'FibService', 'void', [('i16', 'clientId', 'i16'), ('IpPrefix.UnicastRoute', 'route', 'IpPrefix.UnicastRoute')]),
    'deleteUnicastRoute': Function('deleteUnicastRoute', 'FibService', 'void', [('i16', 'clientId', 'i16'), ('IpPrefix.IpPrefix', 'prefix', 'IpPrefix.IpPrefix')]),
    'addUnicastRoutes': Function('addUnicastRoutes', 'FibService', 'void', [('i16', 'clientId', 'i16'), ('list<IpPrefix.UnicastRoute>', 'routes', 'list<IpPrefix.UnicastRoute>')]),
    'deleteUnicastRoutes': Function('deleteUnicastRoutes', 'FibService', 'void', [('i16', 'clientId', 'i16'), ('list<IpPrefix.IpPrefix>', 'prefixes', 'list<IpPrefix.IpPrefix>')]),
    'syncFib': Function('syncFib', 'FibService', 'void', [('i16', 'clientId', 'i16'), ('list<IpPrefix.UnicastRoute>', 'routes', 'list<IpPrefix.UnicastRoute>')]),
    'periodicKeepAlive': Function('periodicKeepAlive', 'FibService', 'i64', [('i16', 'clientId', 'i16')]),
    'aliveSince': Function('aliveSince', 'FibService', 'i64', []),
    'getCounters': Function('getCounters', 'FibService', 'map<string, i64>', []),
    'getRouteTableByClient': Function('getRouteTableByClient', 'FibService', 'list<IpPrefix.UnicastRoute>', [('i16', 'clientId', 'i16')]),
}

SERVICE_NAMES = ['LinuxFibService', 'FibService', ]

if __name__ == '__main__':
    Remote.run(FUNCTIONS, SERVICE_NAMES, LinuxFibService, ttypes, sys.argv, default_port=9090)
